<mat-toolbar color="primary">
  <mat-toolbar-row>
    <span>{{title}}</span>
  </mat-toolbar-row>
</mat-toolbar>
<main>
  <div class="map" [class.-disabled]="isLoading$ | async">
    <agm-map
      [latitude]="(currentPosition$ | async)?.lat || defaultCoord.lat"
      [zoom]="zoom"
      [longitude]="(currentPosition$ | async)?.lng || defaultCoord.lng"
      (boundsChange)="boundsChange($event)"
    >
      <agm-marker
        *ngFor="let marker of markers$ | async"
        [latitude]="marker.lat"
        [longitude]="marker.lng"
        [opacity]="marker.alpha"
      >
      </agm-marker>
      <agm-marker
        *ngIf="!!(currentPosition$ | async)"
        [latitude]="(currentPosition$ | async)?.lat"
        [longitude]="(currentPosition$ | async)?.lng"
        [opacity]="1"
      >
      </agm-marker>
    </agm-map>
  </div>
  <div *ngIf="isLoading$ | async" class="loading-container">
    <mat-spinner></mat-spinner>
  </div>
</main>
